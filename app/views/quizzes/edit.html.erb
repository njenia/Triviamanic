<h1>Editing quiz #<%= @quiz.id %></h1>

<%= form_tag quiz_categories_path(@quiz), :method => 'post', :remote => true do %>
  <%= text_field_tag 'category', nil, :placeholder => 'Category' %>
  <%= submit_tag 'Add' %>
<% end %>

<style>
  .quiz-table-category-header {
    text-size: 20px;
  }

  .quiz-table-category-column {
    float: left;
    width: 20%;
    text-align: center;
  }

  .quiz-table-question {
    outline: 1px solid black;
    margin: 5px;
    padding: 5px;
    height: 70px;
    background: #A3FFA3a;
    cursor: move;
  }

  .quiz-table-add-question {
    margin: 5px;
    outline: 1px dashed black;
    background: #78FF52;
  }
</style>

<div class="quiz-table" id="quiz-table">
<% @quiz.categories.each do |cat| %>
  <div class="quiz-table-category-column" data-category-id="<%= cat.id %>">
    <div class="quiz-table-category-header"><h3><%= cat.name %></h3></div>
    <ul class="no-bullets-ul sortable-questions">
      <% cat.questions.order("points ASC").each do |question| %>
        <li class="quiz-table-question" data-question-id='<%= question.id %>'>
          <div class="question-points"><%= question.points %></div>
          <div><%= ((question.title.nil? or question.title.empty?) ?
                     "Question #" + question.id.to_s : question.title) %></div>
          <div><%= link_to "edit",
                          edit_category_question_path(cat, question) %></div>
        </li>
      <% end %>
    </ul>
    <a href="<%= new_category_question_path(cat) %>" data-method="get"><div class="quiz-table-add-question">
      + Add question
    </div></a>
  </div>
<% end %>
</div>

